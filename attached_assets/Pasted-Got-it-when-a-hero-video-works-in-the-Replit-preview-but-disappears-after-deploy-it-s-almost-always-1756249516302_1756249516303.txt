Got it—when a hero video works in the Replit preview but disappears after deploy, it’s almost always one (or a combo) of these:

Why it breaks after deploy (most common)

Autoplay policy (mobile/iOS): videos won’t autoplay unless muted and playsinline are present.

Wrong path after build: files in src/assets get hashed; hardcoding /hero.mp4 404s. Or files live in public/ but you referenced a relative path that changes after deploy.

Mixed content: your site is HTTPS but the video link is HTTP → browser blocks it.

Codec/format: .mov or HEVC won’t play on some browsers. Use H.264 MP4, and ideally also WebM.

CORS/hotlink: external host blocks cross-origin video loads.

File too big / slow: on mobile it quietly fails; poster shows nothing if none set.

Caching: deployed CDN is serving an old build; file name unchanged.

Below is a copy-paste fix that covers all 7.

Do this (step-by-step)
1) Prepare compatible, small files

Transcode your hero into web-optimized MP4 + WebM and make a poster:

# MP4 (H.264) + faststart for web
ffmpeg -i input.mov -vf "scale=1920:-2" -r 24 -c:v libx264 -profile:v high -pix_fmt yuv420p -preset medium -crf 20 -movflags +faststart -c:a aac -b:a 128k hero-1080.mp4

# WebM (optional, for Chrome/Android quality)
ffmpeg -i input.mov -vf "scale=1920:-2" -r 24 -c:v libvpx-vp9 -b:v 0 -crf 32 -row-mt 1 -c:a libopus -b:a 96k hero-1080.webm

# Poster image (first frame)
ffmpeg -i hero-1080.mp4 -ss 00:00:01.000 -vframes 1 hero-poster.jpg


Target ~10–20 MB for the hero (keep it tight).

2) Put files where React will find them

Create public/media/hero/ and drop in:

hero-1080.mp4

hero-1080.webm

hero-poster.jpg

(Anything in public/ is served at the site root and won’t get hashed.)

3) Use a robust <video> block

Paste this exact hero into your React page (replaces your current hero):

function Hero() {
  return (
    <section className="hero">
      <video
        className="reel"
        autoPlay
        muted
        loop
        playsInline
        preload="auto"
        poster="/media/hero/hero-poster.jpg"
        onError={(e)=>{ console.warn("Video error", e); }}
      >
        <source src="/media/hero/hero-1080.webm" type="video/webm" />
        <source src="/media/hero/hero-1080.mp4"  type="video/mp4" />
      </video>

      <div className="veil" />
      <div className="heroCopy">
        <h1 className="heroTitle">We preserve the in-between.</h1>
        <div className="heroSub">Sydney • New South Wales • Australia</div>
      </div>

      <style>{`
        .hero{position:relative;min-height:88vh;display:flex;align-items:center;justify-content:center;isolation:isolate}
        .reel{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:grayscale(100%) contrast(1.05) brightness(.9)}
        .veil{position:absolute;inset:0;background:radial-gradient(85% 60% at 50% 50%, rgba(0,0,0,.15), rgba(0,0,0,.55))}
        .heroCopy{position:relative;text-align:center;padding:0 24px;color:#f5f5f5}
        .heroTitle{font-size:56px;line-height:1.05;margin:0 0 10px}
        .heroSub{opacity:.8;font-size:14px;letter-spacing:.08em;text-transform:uppercase}
        @media(max-width:640px){ .heroTitle{font-size:36px} }
        /* Respect data/motion preferences: fallback to poster only */
        @media (prefers-reduced-motion: reduce) {
          .reel{display:none}
          .hero{background:#000 url('/media/hero/hero-poster.jpg') center/cover no-repeat;}
        }
      `}</style>
    </section>
  );
}

4) Ensure HTTPS & same-origin

Your <source> tags now point to same-origin (/media/...). No CORS.

Your domain will be HTTPS once Replit finishes SSL. Avoid any http:// URLs.

5) If you want to import from src/ instead

If you prefer keeping assets in src/assets, import them so the bundler rewrites paths:

import heroMp4 from "./assets/hero-1080.mp4";
import heroWebm from "./assets/hero-1080.webm";
import heroPoster from "./assets/hero-poster.jpg";

/* then use:
<source src={heroWebm} type="video/webm" />
<source src={heroMp4}  type="video/mp4" />
poster={heroPoster}
*/


This avoids 404s caused by incorrect hardcoded paths after build.

6) Add a graceful autoplay fallback (iOS/data-saver)

Some devices still block autoplay even when muted. Add a one-liner to reveal a “Play” button if autoplay fails:

useEffect(()=>{
  const v = document.querySelector(".reel");
  if(!v) return;
  const start = v.play();
  if(start !== undefined){
    start.catch(()=>{
      // show a play button overlay
      v.setAttribute("controls","controls"); // simplest fallback
    });
  }
},[]);


(Or show a custom play overlay and call video.play() on click.)

7) Bust caching after redeploy

If you replace the video with a new file but keep the same name, some CDNs cache it. Rename the file (e.g., hero-1080-v2.mp4) or add a cachebuster query: /media/hero/hero-1080.mp4?v=2.